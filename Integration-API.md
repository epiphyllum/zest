# 接口文档

## 1. 接口说明

### 1.1. 接口参数

商户接入时, 会拿到如下参数

1. 商户号(merchant id)
2. 平台公钥

同时商户需要做如下工作

1. 生成1024位长的rsa公私钥
2. 将生成的公钥在商户邮件提交给我方商务人员
3. 将生成的私钥保存, 作为后续接口签名使用
4. 将webhook地址配置到商户后台, 比如为:https://your.domain.com/webhook, 作为平台通知商户的通知接口地址

### 1.2. 接口地址

开发环境接口地址: ${baseUrl}/sys/zapi
生产环境待定

### 1.3 接口方式

所有请求都是是HTTP POST, content-type为application/json. 所有应答也是json
文件上传接口里， 需要将content-type必须使用application/octet-stream

同时在http请求头包含如下相关字段  
x-merchant-id: 平台给商户分配的商户号  
x-sign:  签名结果  
x-req-id: 请求ID, 请求方保证唯一性  
x-api-name: 接口名称

### 1.4. 接口公共应答格式

应答的JOSN格式如下:

```json
{
  "code": 0,
  "data": {},
  "msg": "错误消息"
}
```

code为0代表接口请求被处理， 具体处理接口需要依据x-api-name具体的接口名称而定，后面章节会对每个接口的应答的data字段做详细说明

code不为0代表接口处理异常， 包括平台的内部异常, 以及客户端请求不合法的情况， 相当的错误信息回在msg里提供

### 1.5. 通知接口说明
我方通知商户， 也要求商户按照我方同样的接口处理方式来接收以及应答

## 2. 接口安全

双方所有的请求都需要请求侧签名, 接收侧验证签名.

### 2.1. 签名与验签

签名算法如下:

1. 组签名串  
   将HTTP的请求body计算一个sha256的hex字符串， 然后附加上x-req-id以及x-merchant-id, x-api-name得到字符串toSign  
   公式描述就是: toSign = sha256Hex(body) + header("x-req-id") + header("x-merchant-id") + header("x-api-name")
2. 计算签名  
   用标准的SHA512withRSA签名算法对toSign字符串进行签名， 将签名结果放到x-sign的http请求头里
3. 请求与应答  
   如果是商户请求平台， 则商户用自己的私钥完成上述签名， 平台收到请求后， 商户的公钥来验证签名  
   如果是平台通知商户， 平台会用平台自身私钥来签名, 商户需要用拿到的平台公钥参数验证签名

### 2.2 生产环境双方接口地址需采用https

## 3. 接口列表说明

商户在我平台开户以后， 我方平台会为商户开通15个币种的入金账户的内部虚拟户， 同时商户需要再平台上申请绑定自身的来账账户信息,
也就是进来通过哪些银行将资金充值到平台.  同时平台还会给商户开通一个顶级的虚拟户, 后面统一叫商户va， 同时商户还可以为自身增加子商户，
平台也会为子商户开通子商户va,  商户资金的资金有如下可能流向

| From   | To     | 描述           |
|--------|--------|--------------|
| 客户来账账户 | usd入金  | 这里以美金入金账户为例, |
| usd入金户 | hkd入金户 | 商户用usd换汇hkd  |
| hkd入金户 | 商户va   | 资金进入运营       |
| 商户va   | 子商户va  | 资金调拨         |
| 子商户va  | 卡      | 卡充值          |
| 卡      | 子商户va  | 卡资金退回        |
| 子商户va  | 商户va   | 资金调拨         |
| 商户va   | hkd入金户 | 资金退出运营       |
| hkd入金户 | usd入金户 | 换汇为美金        |
| usd入金户 | 来账账户   | 资金退出         |


### 3.1 资金管理接口
 | 接口名称          | 中文名          | 描述                                        |
|---------------|--------------|-------------------------------------------|
 | moneyInNotify | 入金通知(平台到商户)  |                                           |
 | i2v           | 入金账户转va      |                                           |
 | v2i           | va转入金账户      |                                           |
 | m2s           | 商户va到子商户va   |                                           |
 | s2m           | 子商户va到商户va   |                                           |
 | m2sQuery      | 商户va到子商户va查询 |                                           |
 | s2mQuery      | 子商户va到商户va查询 |                                           |

### 3.2 换汇接口
| 接口名称                 | 中文名            | 描述                                        |
|----------------------|----------------|-------------------------------------------|
| exchangeApply        | 换汇申请           |                                           |
| exchangeLock         | 锁汇询价           |                                           |
| exchangeConfirm      | 换汇确认           |                                           |
| exchangeQuery        | 换汇结果查询         |                                           |
| exchangeNotify       | 换汇结果通知         |                                           |

### 3.3 子商户接口
| 接口名称                 | 中文名            | 描述                                        |
|----------------------|----------------|-------------------------------------------|
| newSubMerchant       | 创建子商户          |                                           |
| newSubMerchantNotify | 子商户创建结果通知      |                                           |
| newSubMerchantQuery  | 子商户创建结果查询      |                                           |

### 3.4 卡管理接口
| 接口名称                 | 中文名            | 描述                                        |
|----------------------|----------------|-------------------------------------------|
 | newCard              | 创建卡            |                                           |
 | cardQuery            | 卡申请单查询         | 卡申请、卡充值、提取卡资金、卡注销申请单当前处理进度。               |
 | cardCharge           | va向卡里充值        |                                           |
 | cardWithdraw         | 卡里资金退回va       |                                           |
 | cardActivate         | 卡激活(实体卡)       |                                           |
 | cardPayInfo          | 卡支付信息查询        |                                           |
 | cardBalance          | 卡余额查询          |                                           |
| cardChange           | 卡变更            | 卡状态变更申请:                                  |
| cardNotify           | 卡申请单结果通知       | 卡申请、卡充值、提取卡资金、卡注销申请单当前处理进度。               |
 | cardStateNotify      | 卡状态变更通知(平台到商户) | 涉及的状态变更的功能接口（卡挂失、解除卡挂失、卡支付、解除卡支付、销卡、解除销卡） |

### 3.5 卡交易信息接口
| 接口名称                 | 中文名            | 描述                                        |
|----------------------|----------------|-------------------------------------------|
| cardTxnQuery         | 授权交易明细查询       |                                           |
| cardSettleQuery      | 入账交易明细查询       |                                           |
| cardTxnNotify        | 授权交易通知         |                                           |

### 3.6 内部账户接口
| 接口名称                 | 中文名            | 描述                                        |
|----------------------|----------------|-------------------------------------------|
| inMoneyAccount       | 入金账户查询         | 入金账户余额查询                                  |
| vaAccount            | 商户VA账户         | 商户va余额查询                                  |
| vaSubAccount         | 子商户VA          | 子商户va余额查询                                 |

### 3.6 文件接口
| 接口名称   | 中文名  | 描述                             |
|--------|------|--------------------------------|
| upload | 文件上传 | 部分接口需要附件是， 需要先通过此接口上传文件后拿到文件id |

## 4 接口详细说明列表

###  4.1 资金管理接口

### 4.1.1 入金通知(平台通知商户)

接口名称(x-api-name): moneyInNotify  
请求体:

| 中文名称	     | 字段	                   | 类型	       | 长度	    | 必输	 | 备注                                   |
|-----------|-----------------------|-----------|--------|-----|--------------------------------------|
| 	变动金额	    | 	amount	              | 	Number	  | 	18,2	 | 	Y	 | 	变动金额					                           |     |
| 	币种	      | 	currency             | 		String	 | 	10	   | 	Y	 | 	币种                                  |     |
| 	入账时间	    | 	time	                | 	String	  | 	25	   | 	Y	 | 	ISO格式[yyyy-MM-dd'T'HH:mm:ssZ] 					 |            |
| 	打款方姓名	   | 	payeraccountname	    | 	String	  | 	120	  | 	O	 | 	付款方账户名称					                        |            |
| 	打款方银行账号	 | 	payeraccountno	      | 	String	  | 	45	   | 	O	 | 	付款方账户号					                         |            |
| 	打款方银行号	  | 	payeraccountbank	    | 	String	  | 	30	   | 	O	 |                                      |            |
| 	打款方国家	   | 	payeraccountcountry	 | 	String	  | 	3	    | 	O	 |                                      |            |

应答data:  
空

### 4.1.2 入金账户转VA

接口名称(x-api-name): moneyToVa  
请求体:

| 中文名称	 | 字段	      | 类型	      | 长度	    | 必输	 | 备注         |
|-------|----------|----------|--------|-----|------------|
| 	金额	  | 	amount	 | 	Number	 | 	18,2	 | 	Y	 | 	变动金额					 |     |

应答data:

### 4.1.3 商户VA到子商户VA调拨

接口名称(x-api-name): m2s  
请求体:
| 中文名称	   | 字段	      | 类型	      | 长度	    | 必输	 | 备注         |
|---------|----------|----------|--------|-----|------------|
| 	金额	    | 	amount	 | 	Number	 | 	18,2	 | 	Y	 | 	变动金额					 |     |
| 	子商户id	 | 	subid	  | 	String	 | 	18,2	 | 	Y	 | 	变动金额					 |     |
| 	商户流水号	 | 	meraplid	  | 	String	 | 	32	 | 	Y	 | 	变动金额					 |     |

应答data:
空


### 4.1.4 查询m2s调拨
接口名称(x-api-name): m2sQuery
请求体:

| 中文名称	   | 字段	      | 类型	      | 长度	    | 必输	 | 备注         |
|---------|----------|----------|--------|-----|------------|
| 	商户流水号	 | 	meraplid	  | 	String	 | 	32	 | 	Y	 | 						 |     |
应答data:
空

### 4.1.5 子商户VA到商户VA调拨

接口名称(x-api-name): s2m  
请求体:

| 中文名称	   | 字段	      | 类型	      | 长度	    | 必输	 | 备注         |
|---------|----------|----------|--------|-----|------------|
| 	金额	    | 	amount	 | 	Number	 | 	18,2	 | 	Y	 | 	变动金额					 |     |
| 	子商户id	 | 	subid	  | 	String	 | 	18,2	 | 	Y	 | 	变动金额					 |     |

应答data:

### 4.1.6 查询s2m调拨
接口名称(x-api-name): s2mQuery
请求体:

| 中文名称	   | 字段	        | 类型	      | 长度	  | 必输	 | 备注     |
|---------|------------|----------|------|-----|--------|
| 	商户流水号	 | 	meraplid	 | 	String	 | 	32	 | 	Y	 | 						 |     |

应答data:
空

### 4.2 换汇接口

### 4.2.1 换汇申请

接口名称(x-api-name): exchangeApply  
请求体:

| 中文名称	 | 字段	         | 类型	     | 长度	    | 必输	 | 备注           |
|-------|-------------|---------|--------|-----|--------------|
| 申请单流水 | 	meraplid   | 	String | 	32    | 	Y  | 	客户自己生成，保持唯一 |
| 到账商户  | 	payeemerid | 	String | 	32	   | Y   |              |
| 到账币种  | 	payeeccy   | 	String | 	3     | 	O  | 	见附录【币种类型】   |
| 卖出币种  | 	payerccy   | 	String | 	3     | 	O  | 	见附录【币种类型】   |
| 金额    | 	amount     | 	Number | (18,2) | 	Y	 | 卖出金额         |

应答data:

### 4.2.2 锁汇询价

接口名称(x-api-name): exchangeLock  
请求体:

| 中文名称	 | 字段	      | 类型	      | 长度	 | 必输	 | 备注  |
|-------|----------|----------|-----|-----|-----|
| 申请单号  | 	applyid | 	String	 | 32	 | Y   | 	   |

应答data:

| 中文名称	 | 字段	             | 类型	     | 长度	   | 必输	 | 备注  |
|-------|-----------------|---------|-------|-----|-----|
| 申请单号  | 	applyid        | 	String | 	32   | 	Y  |     |
| 交易金额  | 	amount         | 	Number | 	18,2 | 	Y  |     |
| 交易币种  | 	feeCurrency    | 	String | 	3	   | Y   |     |
| 结算金额  | 	settleAmount   | 	Number | 	18,2 | 	Y  |     |
| 结算币种  | 	settleCurrency | 	String | 	3    | 	Y	 |     |
| 汇率    | 	fxrate         | 	Number | 	10,6 | 	Y	 |     |
| 手续费   | 	fee            | 	Number | 	18,2 | 	Y  |     |

### 4.2.3 换汇确认

接口名称(x-api-name): exchangeConfirm  
请求体:

| 中文名称	 | 字段	      | 类型	      | 长度	 | 必输	 | 备注                 |
|-------|----------|----------|-----|-----|--------------------|
| 申请单号  | 	applyid | 	String	 | 32	 | Y   | 	                  |
| 成交方式  | extype   | String   | 2	  | Y   | 	LK:锁汇成交 MT：现价锁汇成交 |

应答data:
空

### 4.2.4 换汇结果通知(平台通知商户)

接口名称(x-api-name): exchangeNotify 
请求体:

| 中文名称	 | 字段	           | 类型	      | 长度	   | 必输	 | 备注              |
|-------|---------------|----------|-------|-----|-----------------|
| 申请单号  | 	applyid      | 	String	 | 32	   | Y   | 	               |
| 支付金额  | payamount	    | Number   | 	18,2 | 	Y	 |                 |
| 结算金   | 	stlamount	   | Number   | 	18,2 | 	O	 |                 |
| 手续费	  | fee           | 	Number  | 	18,2 | 	O	 |                 |                 |
| 汇率	   | exchrate      | 	Number  | 	10,6 | 	O	 |                 |
| 支付币种  | 	payccy       | 	String  | 	3	   | Y   |                 |
| 结算币种  | 	stlccy       | 	String  | 	3	   | Y	  |                 |
| 申报编号  | 	declarecode  | 	String	 | 8	    | O   |                 |
| 附言	   | ps	           | String	  | 200   | 	O	 |                 |
| 汇款用途  | 	purpose      | 	String  | 	200	 | O   |                 |
| 申请单号  | 	applyid      | 	String	 | 32	   | Y   |                 |
| 状态    | 	state        | 	String  | 	2    | 	Y	 | 详细参考“附录——申请单状态” |
| 状态描述  | 	stateExplain | 	String	 | 300	  | Y   |                 |

应答data:
空

### 4.2.5 换汇结果查询

接口名称(x-api-name): exchangeQuery  
请求体:

| 中文名称	 | 字段	      | 类型	      | 长度	 | 必输	 | 备注  |
|-------|----------|----------|-----|-----|-----|
| 申请单号  | 	applyid | 	String	 | 32	 | Y   | 	   |

应答data:

| 中文名称	 | 字段	           | 类型	      | 长度	   | 必输	 | 备注              |
|-------|---------------|----------|-------|-----|-----------------|
| 申请单号  | 	applyid      | 	String	 | 32	   | Y   | 	               |
| 支付金额  | paramount	    | Number   | 	18,2 | 	Y	 |                 |
| 结算金   | 	stl-amount	  | Number   | 	18,2 | 	O	 |                 |
| 手续费	  | fee           | 	Number  | 	18,2 | 	O	 |                 |                 |
| 汇率	   | exchrate      | 	Number  | 	10,6 | 	O	 |                 |
| 支付币种  | 	payccy       | 	String  | 	3	   | Y   |                 |
| 结算币种  | 	stlccy       | 	String  | 	3	   | Y	  |                 |
| 申报编号  | 	declarecode  | 	String	 | 8	    | O   |                 |
| 附言	   | ps	           | String	  | 200   | 	O	 |                 |
| 汇款用途  | 	purpose      | 	String  | 	200	 | O   |                 |
| 申请单号  | 	applyid      | 	String	 | 32	   | Y   |                 |
| 状态    | 	state        | 	String  | 	2    | 	Y	 | 详细参考“附录——申请单状态” |
| 状态描述  | 	stateExplain | 	String	 | 300	  | Y   |                 |

## 4.3 子商户接口 (todo), 可先在管理后台开通 

### 4.3.1 开通子商户

接口名称(x-api-name): newSubMerchant  
请求体:  
应答data:

### 4.3.2 子商户开通结果通知(平台通知商户)

接口名称(x-api-name): newSubMerchantNotify  
请求体:  
应答data:

### 4.3.3 子商户开通结果查询(平台通知商户)

接口名称(x-api-name): newSubMerchantQuery  
请求体:  
应答data:

## 4.4 卡管理接口

### 4.4.1 开卡

接口名称(x-api-name): newCard  
请求体:

| 中文名称	     | 字段	                | 类型	      | 长度	   | 必输	 | 备注                                                                |
|-----------|--------------------|----------|-------|-----|-------------------------------------------------------------------|
| 申请单流水     | 	meraplid	         | String   | 	32	  | Y	  | 客户自己生成，保持唯一                                                       |
| 卡片种类	     | 	cardtype	         | 	String	 | 	2	   | 	Y	 | 	1：虚拟卡，4：虚实同发                                                     |
| 主体类型	     | 	belongtype	       | 	String	 | 	2	   | 	Y	 | 	1：员工2：合作企业								                                               |
| 子商户号	     | 	cusid	            | 	String	 | 	30	  | 	C	 | 	主体类型为合作企业时必填，【子商户创建】结果返回的cusid								                           |
| 持卡人身份	    | 	cardholdertype	   | 	String	 | 	3	   | 	Y	 | 	1：法人持有0：其他管理员								                                            |
| 国籍	       | 	nationality	      | 	String	 | 	50	  | 	Y	 | 	见附录【国别信息】中的CODE,如中国：CHN								                                  |
| 公司职位	     | 	companyposition	  | 	String	 | 	50	  | 	Y	 | 	1：法人代表2：董事3：高级管理员4：经理5：职员								                                |
| 姓氏	       | 	surname	          | 	String	 | 	20	  | 	Y	 |                                                                   |
| 名字	       | 	name	             | 	String	 | 	30	  | 	Y	 |                                                                   |
| 出生日期	     | 	birthday	         | 	String	 | 	10	  | 	Y	 | 	YYYYMMDD								                                                 |
| 证件类型	     | 	idtype	           | 	String	 | 	2	   | 	Y	 | 	01：居民身份证02：军人或武警身份证03：港澳台通行证04：护照05：其他有效旅行证件06：其他类个人有效证件								 |
| 证件号码	     | 	idnumber	         | 	String	 | 	30	  | 	Y	 |                                                                   |
| 性别	       | 	gender	           | 	String	 | 	2	   | 	Y	 | 	1：男 0：女								                                                  |
| 国家/地区	    | 	country	          | 	String	 | 	3	   | 	Y	 | 	见附录【国别信息】中的CODE,如中国：CHN								                                  |
| 详情地址	     | 	address	          | 	String	 | 	200	 | 	Y	 |                                                                   |
| 邮箱	       | 	email	            | 	String	 | 	50	  | 	Y	 |                                                                   |
| 手机号码所属地区	 | 	mobilecountry	    | 	String	 | 	10	  | 	Y	 | 	见附录【国别信息】中的PHONE_CODE								                                    |
| 手机号码	     | 	mobilenumber	     | 	String	 | 	20	  | 	Y	 |                                                                   |
| 邮政编码	     | 	deliverypostcode	 | 	String	 | 	20	  | 	Y	 |                                                                   |
| 证件正面照片	   | 	photofront	       | 	String	 | 	100	 | 	Y	 | 	文件fid								                                                    |
| 证件反面照片	   | 	photoback	        | 	String	 | 	100	 | 	Y	 | 	文件fid								                                                    |
| 申请费用扣款账户	 | 	payerid	          | 	String	 | 	15	  | 	Y	 | 	【VA账户列表查询】响应报文中的账户唯一标识id								                                 |
| 邮寄国家/地区	  | 	deliverycountry	  | 	String	 | 	10	  | 	C	 | 	卡片类型为虚实同发时必填，见附录【国别信息】中的CODE								                             |
| 邮寄省份	     | 	deliveryprovince	 | 	String	 | 	6	   | 	C	 | 	邮寄国家/地区为CHN时必填，见附件【地区代码】								                                 |
| 邮寄城市	     | 	deliverycity	     | 	String	 | 	6	   | 	C	 | 	邮寄国家/地区为CHN时必填，见附件【地区代码】								                                 |
| 邮寄城市	     | 	deliveryaddress	  | 	String	 | 	200	 | 	C	 | 	卡片类型为虚实同发时必填								                                             |

应答data:

| 中文名称	 | 字段	      | 类型	      | 长度	 | 必输	 | 备注  |
|-------|----------|----------|-----|-----|-----|
| 申请单号  | 	applyid | 	String	 | 32  | 	Y  |     |  

### 4.4.2 卡申请单查询

接口名称(x-api-name): cardQuery  
请求体:

| 中文名称	 | 字段	      | 类型	      | 长度	 | 必输	 | 备注  |
|-------|----------|----------|-----|-----|-----|
| 申请单号  | 	applyid | 	String	 | 32  | 	Y  |     |  

应答data:

| 中文名称	   | 字段	           | 类型	      | 长度	   | 必输	 | 备注               |
|---------|---------------|----------|-------|-----|------------------|
| 申请单流水   | 	meraplid     | 	String	 | 32    | 	Y	 |                  |
| 申请单号    | 	applyid      | 	String	 | 32    | 	Y	 |                  |
| 交易类型	   | trxcode	      | String	  | 25    | 	Y	 | 见附录【交易类型】        |
| 申请时间    | 	createtime   | 	String	 | 20    | 	Y	 |                  |
| 申请费用    | 	fee          | 	Number  | 	18,2 | 	O  |                  |
| 申请费用币种	 | feecurrency	  | String   | 	3    | 	O  |                  |
| 卡号	     | cardno	       | String	  | 30    | 	O	 | 申请成功后返回          |
| 币种	     | currency      | 	String  | 	3	   | O	  | 申请成功后返回          |
| 申请单状态   | 	state        | 	String	 | 2	    | Y	  | 详细参考“附录——卡申请单状态” |
| 状态说明    | 	stateexplain | 	String  | 	200  | 	O  |                  |

### 4.4.3 卡申请单通知

接口名称(x-api-name): cardNotify  
请求体:

| 中文名称	   | 字段	           | 类型	      | 长度	   | 必输	 | 备注               |
|---------|---------------|----------|-------|-----|------------------|
| 申请单流水   | 	meraplid     | 	String	 | 32    | 	Y	 |                  |
| 申请单号    | 	applyid      | 	String	 | 32    | 	Y	 |                  |
| 交易类型	   | trxcode	      | String	  | 25    | 	Y	 | 见附录【交易类型】        |
| 申请时间    | 	createtime   | 	String	 | 20    | 	Y	 |                  |
| 申请费用    | 	fee          | 	Number  | 	18,2 | 	O  |                  |
| 申请费用币种	 | feecurrency	  | String   | 	3    | 	O  |                  |
| 卡号	     | cardno	       | String	  | 30    | 	O	 | 申请成功后返回          |
| 币种	     | currency      | 	String  | 	3	   | O	  | 申请成功后返回          |
| 申请单状态   | 	state        | 	String	 | 2	    | Y	  | 详细参考“附录——卡申请单状态” |
| 状态说明    | 	stateexplain | 	String  | 	200  | 	O  |                  |

应答data:
空

### 4.4.4 卡片激活(实体卡)

接口名称(x-api-name): cardActivate  
请求体:

| 中文名称	 | 字段	         | 类型	      | 长度	 | 必输	 | 备注       |
|-------|-------------|----------|-----|-----|----------|
| 卡号	   | cardno	     | String	  | 30	 | Y   |
| CVV2	 | cvv         | 	String	 | 3	  | Y   |
| 有效期	  | expiredate	 | String	  | 4	  | Y   |
| 证件号码  | 	idnumber   | 	String	 | 30	 | Y   |
| 出生日期  | 	birthday   | 	String	 | 10	 | Y	  | YYYYMMDD |

应答data:
空

### 4.4.5 卡支付信息查询

接口名称(x-api-name): cardPayInfo

请求体:

| 中文名称	 | 字段	     | 类型	     | 长度	 | 必输	 | 备注  |
|-------|---------|---------|-----|-----|-----|
| 卡号	   | cardno	 | String	 | 30  | 	Y  |

应答data:

| 中文名称	 | 字段	         | 类型	     | 长度	 | 必输	 | 备注   |
|-------|-------------|---------|-----|-----|------|
| 卡号	   | cardno	     | String	 | 30	 | Y   |      |
| CVV2  | 	cvv	       | String	 | 3	  | Y	  | 加密字段 |
| 有效期	  | expiredate	 | String	 | 4	  | Y	  | 加密字段 |

### 4.4.6 卡变更

接口名称(x-api-name): cardChange
请求体:

| 中文名称	  | 字段	         | 类型	     | 长度	 | 必输	 | 备注                                                     |
|--------|-------------|---------|-----|-----|--------------------------------------------------------|
| 申请单流水	 | meraplid	   | String	 | 32	 | Y   |                                                        |
| 卡号	    | cardno	     | String	 | 30	 | Y   |                                                        |
| 变更类型	  | changetype	 | String	 | 30	 | Y   | cancel, cancelDrop, lost, lostDrop, freeze, freezeDrop |

应答data:

| 中文名称	 | 字段	      | 类型	      | 长度	 | 必输	 | 备注  |
|-------|----------|----------|-----|-----|-----|
| 申请单号  | 	applyid | 	String	 | 32	 | Y   | 	   |

### 4.4.7 卡余额查询

接口名称(x-api-name): cardBalance  
请求体:

| 中文名称	 | 字段	    | 类型	      | 长度	 | 必输	 | 备注  |
|-------|--------|----------|-----|-----|-----|
| 卡号	   | cardno | 	String	 | 30  | 	Y  |

应答data:

| 中文名称	 | 字段	      | 类型	    | 长度	  | 必输	 | 备注  |
|-------|----------|--------|------|-----|-----|
| 卡号	   | cardno	  | String | 30	  | Y   |
| 币种	   | currency | String | 3	   | Y   |
| 余额	   | balance  | Number | 18,2 | 	Y  |

### 4.4.8 卡状态变更通知(平台到商户)

接口名称(x-api-name): cardStateNotify  
请求体:

| 中文名称	 | 字段	       | 类型	      | 长度	 | 必输	 | 备注             |
|-------|-----------|----------|-----|-----|----------------|
| 卡号	   | cardno	   | String	  | 30  | 	Y	 | 卡片申请审核通过后生成的卡号 |
| 币种	   | currency  | 	String	 | 30  | 	Y  |                |
| 卡形式	  | cardtype  | 	String	 | 1   | 	Y  | 	0：虚拟卡，1：实体卡   |
| 卡状态	  | cardstate | 	String  | 	2  | 	Y  | 	参考附录：卡状态      |

应答data:
空

### 4.4.9 卡充值

接口名称(x-api-name): cardCharge  
请求体:

| 中文名称	     | 字段	             | 类型	          | 长度	  | 必输	 | 备注                       |
|-----------|-----------------|--------------|------|-----|--------------------------|
| 中文名称      | 	字段	            | 类型           | 	长度	 | 必输  | 	备注                      |
| 申请单流水     | 	meraplid       | 	String      | 	32  | 	Y  | 	客户自己生成，保持唯一             |
| 卡号        | 	cardno         | 	String	     | 30	  | Y   |                          |
| 缴纳金额      | 	amount         | 	Number	18,2 | 	Y   |     |                          |
| 交易对手      | 	payeeaccount   | 	String      | 	30  | 	O  |                          |
| 采购内容      | 	procurecontent | 	String      | 	200 | 	O  |                          |
| 保证金对应合同协议 | 	agmfid         | 	String      | 	100 | 	O  |                          |

应答data:

| 中文名称	 | 字段	      | 类型	      | 长度	 | 必输	 | 备注  |
|-------|----------|----------|-----|-----|-----|
| 申请单号  | 	applyid | 	String	 | 32	 | Y   | 	   |

### 4.4.10 卡资金提取

接口名称(x-api-name): cardWithdraw  
请求体:

| 中文名称	   | 字段	       | 类型	      | 长度	    | 必输	 | 备注                      |
|---------|-----------|----------|--------|-----|-------------------------|
| 申请单流水	  | meraplid	 | String	  | 32	    | Y	  | 客户自己生成，保持唯一             |
| 卡号	     | cardno	   | String	  | 30	    | Y   |                         |
| 保证金提现账户 | 	payeeid  | 	String	 | 30	    | Y	  | 【VA账户列表查询】响应报文的账户唯一标识id |
| 保证金提现金额 | 	amount   | 	Number  | 	18,2	 | Y   |                         |

应答data:

| 中文名称	 | 字段	      | 类型	      | 长度	 | 必输	 | 备注  |
|-------|----------|----------|-----|-----|-----|
| 申请单号  | 	applyid | 	String	 | 32	 | Y   | 	   |

## 3.6 卡交易信息接口

### 4.6.1 授权交易通知(平台到商户)

接口名称(x-api-name): cardTxnNotify  
请求体:

| 中文名称	  | 字段	            | 类型	      | 长度	   | 必输	    | 备注                     |
|--------|----------------|----------|-------|--------|------------------------|
| 流水号	   | logkv          | 	String	 | 50	   | O      |                        |                        |
| 交易类型   | trxcode        | 	String	 | 25	   | Y      | 	见附录【授权交易类型】           |                        |
| 卡号	    | cardno         | 	String  | 	30   | 	Y     |                        |
| 状态	    | state          | 	String	 | 2     | 	    Y | 	见附录【授权交易状态】           |
| 状态说明   | 	stateexplain	 | String	  | 200	  | O      |                        |
| 金额	    | amount	        | Number   | 	18,2 | Y      |                        |
| 币种	    | currency	      | String	  | 3	    | Y      |                        |
| 交易时间   | 	trxtime	      | String   | 	20   | 	Y	    | YYYY-MM-DD HH:mm:ss    |
| 交易方向   | 	trxdir	       | String   | 	6    | 	O	    | 付款：101014 收款：101013    |
| 交易地点   | 	trxaddr	      | String   | 	160  | 	      | O                      |
| 授权码    | 	authcode      | 	String  | 	50   | 	O     |                        |
| 商户类别代码 | 	mcc	          | String   | 	20   | 	O     |                        |
| 通知时间   | 	time          | 	String  | 	25	  | Y	     | 格式：YYYY-MM-DD HH:mm:ss |

应答data:

## 3.7 内部账户接口

### 4.7.1 入金账户查询
接口名称(x-api-name): inMoneyAccount
请求体:

| 中文名称	 | 字段	      | 类型	    | 长度	 | 必输	 | 备注                                 |
|-------|----------|--------|-----|-----|------------------------------------|
| 币种    | currency | String | 3   | O   | 如果有币种则返回这个币种的金额余额， 没有指定， 则返会所有币种余额 |

应答data
数组item

| 中文名称	 | 字段	      | 类型	    | 长度	    | 必输	  | 备注                                 |
|-------|----------|--------|--------|------|------------------------------------|
| 币种    | currency | String | 3      | O    | 如果有币种则返回这个币种的金额余额， 没有指定， 则返会所有币种余额 |
| 余额    | balance  | String | Number | 18,2 |  

### 4.7.2 商户va账户查询
接口名称(x-api-name): vaAccount
请求体:

| 中文名称	 | 字段	   | 类型	    | 长度	 | 必输	 | 备注   |
|-------|-------|--------|-----|-----|------|
| 子商户号  | subid | String | 30  | Y   | 子商户号 |

应答data:

| 中文名称	 | 字段	      | 类型	    | 长度	    | 必输	  | 备注  |
|-------|----------|--------|--------|------|-----|
| 币种    | currency | String | 3      | O    | HKD |
| 余额    | balance  | String | Number | 18,2 |

### 4.7.2 子商户va查询
接口名称(x-api-name): vaSubAccount
请求体: 

| 中文名称	 | 字段	   | 类型	    | 长度	 | 必输	 | 备注   |
|-------|-------|--------|-----|-----|------|
| 子商户号  | subid | String | 30  | Y   | 子商户号 |

应答data:

| 中文名称	 | 字段	      | 类型	    | 长度	    | 必输	  | 备注  |
|-------|----------|--------|--------|------|-----|
| 币种    | currency | String | 3      | O    | HKD |
| 余额    | balance  | String | Number | 18,2 |

## 3.8 文件接口

### 4.8.1 附件上传
接口名称(x-api-name): upload

请求体:  
1. content-type请设置为octet-stream  
2. 请求url里增加查询参数file_type=png|jpg|jpeg|pdf   
3. 请求报文为文件内容字节码经过BASE64 RFC4648_URLSAFE格式编码后的内容（Java参考使用Base64. getUrlEncoder()对象进行编码），单文件上传限制20M以内。  
 
应答data:

| 中文名称	 | 字段	 | 类型	    | 长度	         | 必输	 | 备注  |
|-------|-----|--------|-------------|-----|-----|
| 文件id  | fid | String | varchar(64) | Y   |     |


## 3.9 附录   

### 4.9.1 卡申请单状态 

| 编码  | 	状态名  |
|-----|-------|
| 01	 | 待审核   |
| 02	 | 审核不通过 |
| 03	 | 处理中   |
| 04	 | 处理成功  |
| 05	 | 处理失败  |
| 06	 | 退卡处理中 |
| 07	 | 已关闭   |
| 08	 | 待复核   |

### 4.9.2 证件信息
| 证件类型 | 	说明         |
|------|-------------|
| 01	  | 居民身份证或临时身份证 |
| 02	  | 军人或武警身份证件   |
| 03	  | 港澳台通行证      |
| 04	  | 外国公民护照      |
| 05	  | 其他有效旅行证件    |
| 06	  | 其他类个人身份有效证件 |
| 20	  | 营业执照        |
| 99	  | 其他          |

### 4.9.3 支持币种



| 币种  | 	说明  |
|-----|------|
| AUD | 澳元   |
| CAD | 加元   |
| CHF | 瑞士法郎 |
| CNY | 人民币  |
| DKK | 丹麦克朗 |
| EUR | 欧元   |
| GBP | 英镑   |
| HKD | 港币   |
| JPY | 日元   |
| NOK | 挪威克朗 |
| NZD | 新西兰元 |
| SEK | 瑞典克朗 |
| SGD | 新加坡元 |
| USD | 美元   |
| ZAR | 南非兰特 |

### 4.9.4 卡状态
| 状态  | 	说明   |
|-----|-------|
| 01  | 待审核   |
| 02  | 申请处理中 |
| 03  | 申请成功  |
| 04  | 申请失败  |
| 05  | 已销卡   |
| 06  | 冻结    |
| 07  | 运营冻结  |
| 08  | 销卡处理中 |
| 09  | 挂失    |
| 10  | 失效    |

### 4.9.5 授权交易状态

| 授权交易状态 | 	说明 |
|--------|-----|
| 00     | 成功  |
| 01     | 失败  |
| 02     | 被冲正 |

### 4.9.6 授权交易类型
| 授权交易类型   | 	说明  |
|----------|------|
| Auth     | 消费   |
| ReturnOL | 联机退货 |

### 4.9.7 持卡人身份

| 身份编码 | 	说明   |
|------|-------|
| 0    | 其他管理员 |
| 1    | 法人持有  |

### 4.9.8 卡形态

| 编码  | 	说明 |
|-----|-----|
| 0   | 虚拟卡 |
| 1   | 实体卡 |

### 4.9.9 卡主体类型

| 编码  | 	说明  |
|-----|------|
| 1   | 员工   |
| 2   | 合作企业 |

### 4.9.10 商户性质

| 编码  | 	说明       |
|-----|-----------|
| 1   | 合资、股份制、民营 |
| 2   | 世界500强或国有 |
| 3   | 个体户       |
| 4   | 个人        |

### 4.9.11 换汇成交方式

| 编码  | 	说明    |
|-----|--------|
| LK  | 锁汇成功   |
| MT  | 现价锁汇成功 |

### 4.9.12 交易申请单状态

| 编码  | 	说明      |
|-----|----------|
| 01  | 待审核      |
| 02  | 审核不通过    |
| 04  | 到账金额不符   |
| 05  | 处理中      |
| 06  | 处理成功     |
| 07  | 处理失败     |
| 09  | 待结汇      |
| 10  | 结汇处理中    |
| 11  | 交易已关闭    |
| 14  | 失败待修改    |
| 15  | 修改待审批    |
| 16  | 待复核      |
| 17  | 待重发      |
| 18  | 待提现      |
| 19  | 体现中      |
| 20  | 待收汇      |
| 21  | 申报明细导入中  |
| 22  | 申报明细导入失败 |
| 23  | 已退款      |
| 32  | 资金在途     |
| 33  | 资金在途授信   |

### 4.9.13 其他字典, 附件给到商户






